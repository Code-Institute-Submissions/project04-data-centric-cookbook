{% extends 'base.html' %}

{% block template_content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <section id="user_name">
                <span>&#123;&#123; Hello {{ current_user.username }}, welcome back &#125;&#125;</span>
            </section>
        </div>
    </div>
</div>
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <!-- User Content -->
            <section id="user_content">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12 text-center">
                            <h1>PROFILE PAGE</h1>
                            <h3 class="section-subheading text-muted">Lorem ipsum dolor sit amet consectetur.</h3>
                        </div>
                    </div>
                    <!-- User Details -->
                    <div class="row">
                        <div class="col-md-12">
                            <h4 class="service-heading">User details</h4>
                            <p class="text-muted">username: {{ current_user.username }}</p>
                            <p class="text-muted">First name: {{ current_user.firstname }}</p>
                            <p class="text-muted">last name: {{ current_user.lastname }}</p>
                            <p class="text-muted">id: {{ current_user._id }}</p>
                        </div>
                    </div>
                    <!-- User Recipes -->
                    <div class="row">
                        <div class="col-md-12">
                            <h4 class="service-heading">My recipes</h4>
                            <p class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Minima
                                maxime quam architecto quo inventore harum ex magni, dicta impedit.</p>                       
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-2">Name</div>
                        <div class="col-2">Description</div>
                        <div class="col-2 text-center">Views</div>
                        <div class="col-2 text-center">Votes</div>
                        <div class="col-4 text-center" style="background-color:rgb(199, 200, 101)">Manage Recipes <a href="/add_recipe" type="button" id="add_recipe">Add</a></div>
                    </div>
                    <div class="row">
                        {% for r in recipes %}
                        <div class="col-2">{{ r.name }}</div>
                        <div class="col-2">{{ r.description|truncate(100, False, '...', 0) }}</div>
                        <div class="col-2 text-center">{{ r.views }}</div>
                        <div class="col-2 text-center">{{ r.votes }}</div>
                        <div class="col-4 text-center" style="background-color:darkgray">
                            <div class="row">
                                <div class="col-6">
                                    <a href="/edit_recipe" type="button" id="edit_recipe">Edit</a>
                                </div>
                                <div class="col-6">
                                    <a href="/delete_recipe" type="button" id="delete_recipe">Delete</a>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>

<div class="flash_messages">
    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <ul>
        {% for message in messages %}
        <li>{{ message }}</li>
        {% endfor %}
    </ul>
    {% endif %}
    {% endwith %}
</div>

{% endblock %}


<!-- Debug area. Hidden if debug set to False -->
{% block content_debug %}

<div class="container-fluid">
    <div class="row">
        <div class="col-md-6">
            <h5>Connection Test</h5>
            {% for t in test %}
            <p>{{t.test_description}}</p>
            {% endfor %}
            <h5>Session</h5>
            <p>{{ session }}</p>
            <p>session['username']</p>
            <p>session['isLoggedin']</p>
        </div>
        <div class="col-md-6">
            <h5>Current User</h5>
            <p>username: {{ current_user.username }}</p>
            <p>firstname: {{ current_user.firstname }}</p>
            <p>lastname: {{ current_user.lastname }}</p>
            <p>country: {{ current_user.country }}</p>
            <p>_id: {{current_user._id}}</p>
        </div>
    </div>
</div>
{% endblock %}